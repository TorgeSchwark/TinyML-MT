{"id":"8b8ad187-eb6e-49d5-9dfe-cbb4c39dbb90","revision":0,"last_node_id":56,"last_link_id":131,"nodes":[{"id":8,"type":"VAEDecode","pos":[1913,707],"size":[210,46],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":24},{"localized_name":"vae","name":"vae","type":"VAE","link":12}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":10,"type":"VAELoader","pos":[440,1030],"size":[311.81634521484375,60.429901123046875],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"],"color":"#432","bgcolor":"#653"},{"id":11,"type":"DualCLIPLoader","pos":[440,880],"size":[315,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"DualCLIPLoader"},"widgets_values":["t5xxl_fp16.safetensors","clip_l.safetensors","flux","default"],"color":"#432","bgcolor":"#653"},{"id":12,"type":"UNETLoader","pos":[440,750],"size":[315,82],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[56]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"UNETLoader"},"widgets_values":["flux1-dev.safetensors","default"],"color":"#432","bgcolor":"#653"},{"id":16,"type":"KSamplerSelect","pos":[1300,1090],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null}],"outputs":[{"localized_name":"SAMPLER","name":"SAMPLER","type":"SAMPLER","links":[19]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":17,"type":"BasicScheduler","pos":[1300,1190],"size":[315,106],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":55},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"SIGMAS","name":"SIGMAS","type":"SIGMAS","links":[20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"BasicScheduler"},"widgets_values":["simple",20,1]},{"id":22,"type":"BasicGuider","pos":[1658,1102],"size":[222.3482666015625,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":54},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":127}],"outputs":[{"localized_name":"GUIDER","name":"GUIDER","type":"GUIDER","slot_index":0,"links":[30]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"BasicGuider"},"widgets_values":[]},{"id":25,"type":"RandomNoise","pos":[1300,950],"size":[315,82],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"noise_seed","name":"noise_seed","type":"INT","widget":{"name":"noise_seed"},"link":null}],"outputs":[{"localized_name":"NOISE","name":"NOISE","type":"NOISE","links":[37]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"RandomNoise"},"widgets_values":[1001685588887605,"randomize"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":26,"type":"FluxGuidance","pos":[1300,700],"size":[317.4000244140625,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":41},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"FluxGuidance"},"widgets_values":[3.5],"color":"#233","bgcolor":"#355"},{"id":28,"type":"Note","pos":[410,1160],"size":[336,288],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["If you get an error in any of the nodes above make sure the files are in the correct directories.\n\nSee the top of the examples page for the links : https://comfyanonymous.github.io/ComfyUI_examples/flux/\n\nflux1-dev.safetensors goes in: ComfyUI/models/unet/\n\nt5xxl_fp16.safetensors and clip_l.safetensors go in: ComfyUI/models/clip/\n\nae.safetensors goes in: ComfyUI/models/vae/\n\n\nTip: You can set the weight_dtype above to one of the fp8 types if you have memory issues."],"color":"#2a363b","bgcolor":"#3f5159"},{"id":30,"type":"ModelSamplingFlux","pos":[1300,1330],"size":[315,130],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":56},{"localized_name":"max_shift","name":"max_shift","type":"FLOAT","widget":{"name":"max_shift"},"link":null},{"localized_name":"base_shift","name":"base_shift","type":"FLOAT","widget":{"name":"base_shift"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":115},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":114}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[54,55]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.15,0.5,512,512]},{"id":37,"type":"Note","pos":[1300,1520],"size":[314.99755859375,117.98363494873047],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["The reference sampling implementation auto adjusts the shift value based on the resolution, if you don't want this you can just bypass (CTRL-B) this ModelSamplingFlux node.\n"],"color":"#432","bgcolor":"#653"},{"id":38,"type":"CLIPVisionLoader","pos":[840,780],"size":[370,60],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"],"color":"#432","bgcolor":"#653"},{"id":42,"type":"StyleModelLoader","pos":[850,880],"size":[340,60],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"style_model_name","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"STYLE_MODEL","name":"STYLE_MODEL","type":"STYLE_MODEL","links":[125]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"],"color":"#432","bgcolor":"#653"},{"id":43,"type":"Note","pos":[810,1260],"size":[438.3016052246094,277.6073303222656],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["1  Update to latest version of ComfyUI.If unsure, start a cmd terminal and go into your comfy folder, type:git pull\n\n2 Download flux1-redux-dev.safetensors and place into /comfyui/models/style_models https://huggingface.co/black-forest-labs/FLUX.1-Redux-dev/tree/main\n\n3  Download sigclip_vision_patch14_384.safetensors and place into /comfyui/models/clip_vision https://huggingface.co/Comfy-Org/sigclip_vision_384/tree/main"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":52,"type":"StyleModelApplyAdvanced","pos":[836,1098],"size":[393,98],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":124},{"localized_name":"style_model","name":"style_model","type":"STYLE_MODEL","link":125},{"localized_name":"clip_vision_output","name":"clip_vision_output","type":"CLIP_VISION_OUTPUT","link":126},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":128}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[127]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.2","Node name for S&R":"StyleModelApplyAdvanced"},"widgets_values":[0.9000000000000002],"color":"#223","bgcolor":"#335"},{"id":45,"type":"Label (rgthree)","pos":[2340,-140],"size":[416.9921875,100],"flags":{"allow_interaction":true},"order":10,"mode":0,"inputs":[],"outputs":[],"title":"Step 5\nQueue to generate\n","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":13,"type":"SamplerCustomAdvanced","pos":[1646.3509521484375,798.645263671875],"size":[272.3617858886719,326],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"noise","name":"noise","type":"NOISE","link":37},{"localized_name":"guider","name":"guider","type":"GUIDER","link":30},{"localized_name":"sampler","name":"sampler","type":"SAMPLER","link":19},{"localized_name":"sigmas","name":"sigmas","type":"SIGMAS","link":20},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":116}],"outputs":[{"localized_name":"output","name":"output","type":"LATENT","slot_index":0,"links":[24]},{"localized_name":"denoised_output","name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"SamplerCustomAdvanced"},"widgets_values":[],"color":"#232","bgcolor":"#353"},{"id":34,"type":"PrimitiveNode","pos":[520,390],"size":[210,82],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"width"},"slot_index":0,"links":[112,115]}],"title":"width","properties":{"Run widget replace on values":false},"widgets_values":[512,"fixed"],"color":"#323","bgcolor":"#535"},{"id":35,"type":"PrimitiveNode","pos":[760,390],"size":[213.3057861328125,82],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"height"},"slot_index":0,"links":[113,114]}],"title":"height","properties":{"Run widget replace on values":false},"widgets_values":[512,"fixed"],"color":"#323","bgcolor":"#535"},{"id":27,"type":"EmptySD3LatentImage","pos":[1300,800],"size":[315,106],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":112},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":113},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[512,512,1]},{"id":39,"type":"CLIPVisionEncode","pos":[880,1000],"size":[290,78],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":117},{"localized_name":"image","name":"image","type":"IMAGE","link":130},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION_OUTPUT","name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","slot_index":0,"links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionEncode"},"widgets_values":["center"]},{"id":56,"type":"PreviewImage","pos":[368.9550476074219,35.039344787597656],"size":[210,246],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":131}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":55,"type":"ImageResize+","pos":[111.08028411865234,427.9433898925781],"size":[315,218],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":129},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"condition","name":"condition","type":"COMBO","widget":{"name":"condition"},"link":null},{"localized_name":"multiple_of","name":"multiple_of","type":"INT","widget":{"name":"multiple_of"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[130,131]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"ImageResize+"},"widgets_values":[500,375,"nearest","stretch","always",0]},{"id":54,"type":"PrimitiveNode","pos":[1150,387],"size":[309.1686096191406,82],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","widget":{"name":"strength"},"slot_index":0,"links":[128]}],"properties":{"Run widget replace on values":false},"widgets_values":[0.9000000000000002,"fixed"],"color":"#223","bgcolor":"#335"},{"id":47,"type":"Label (rgthree)","pos":[1631.9510498046875,222.39376831054688],"size":[285.25390625,100],"flags":{"allow_interaction":true},"order":14,"mode":0,"inputs":[],"outputs":[],"title":"Step 4\nWrite prompt\n","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":53,"type":"Label (rgthree)","pos":[1092.3218994140625,253.19496154785156],"size":[419.677734375,100],"flags":{"allow_interaction":true},"order":15,"mode":0,"inputs":[],"outputs":[],"title":"Step 3\nAdjust strength 0-1\n","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":9,"type":"SaveImage","pos":[2112.382080078125,80],"size":[637.3416137695312,678.1173095703125],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":9},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"SaveImage"},"widgets_values":["Redux/test"]},{"id":46,"type":"Label (rgthree)","pos":[808.37158203125,100.0152587890625],"size":[327.9296875,100],"flags":{"allow_interaction":true},"order":16,"mode":0,"inputs":[],"outputs":[],"title":"Step 2\nSet image size\n","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":40,"type":"LoadImage","pos":[-257.9735107421875,411.19696044921875],"size":[315,314],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[129]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["D2S_005800.jpg","image"],"color":"#432","bgcolor":"#653"},{"id":44,"type":"Label (rgthree)","pos":[-268.7274475097656,264.3671569824219],"size":[372.4609375,100],"flags":{"allow_interaction":true},"order":18,"mode":0,"inputs":[],"outputs":[],"title":"Step 1\nLoad your image\n","properties":{"fontSize":50,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":6,"type":"CLIPTextEncode","pos":[1463.94775390625,382.3026428222656],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":10},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":["A photo of a coffee package lying on a brown background, rotated, in a different position and angle, realistic lighting, product photography"],"color":"#232","bgcolor":"#353"}],"links":[[9,8,0,9,0,"IMAGE"],[10,11,0,6,0,"CLIP"],[12,10,0,8,1,"VAE"],[19,16,0,13,2,"SAMPLER"],[20,17,0,13,3,"SIGMAS"],[24,13,0,8,0,"LATENT"],[30,22,0,13,1,"GUIDER"],[37,25,0,13,0,"NOISE"],[41,6,0,26,0,"CONDITIONING"],[54,30,0,22,0,"MODEL"],[55,30,0,17,0,"MODEL"],[56,12,0,30,0,"MODEL"],[112,34,0,27,0,"INT"],[113,35,0,27,1,"INT"],[114,35,0,30,4,"INT"],[115,34,0,30,3,"INT"],[116,27,0,13,4,"LATENT"],[117,38,0,39,0,"CLIP_VISION"],[124,26,0,52,0,"CONDITIONING"],[125,42,0,52,1,"STYLE_MODEL"],[126,39,0,52,2,"CLIP_VISION_OUTPUT"],[127,52,0,22,1,"CONDITIONING"],[128,54,0,52,3,"FLOAT"],[129,40,0,55,0,"IMAGE"],[130,55,0,39,1,"IMAGE"],[131,55,0,56,0,"IMAGE"]],"groups":[{"id":1,"title":"Redux Model","bounding":[807.2019653320312,665.0572509765625,437.07147216796875,554.6774291992188],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Flux Base Model","bounding":[400.5731506347656,667.5345458984375,392.6999206542969,442.2001037597656],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1918176537727454,"offset":[8.00844425040599,33.42154560771546]},"frontendVersion":"1.17.11","groupNodes":{}},"version":0.4}